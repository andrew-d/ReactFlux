!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("es6-promise"),require("immutable")):"function"==typeof define&&define.amd?define(["es6-promise","immutable"],e):"object"==typeof exports?exports.ReactFlux=e(require("es6-promise"),require("immutable")):t.ReactFlux=e(t["es6-promise"],t.Immutable)}(this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var r=n(1),i=n(2),s=n(3),o=n(4),a=n(5),f=n(6),u=new a;t.exports={configs:f,createActions:function(t){return new i(u,t)},createStore:function(t,e){return new s(u,t,e)},createConstants:function(t,e){return new r(t,e)},dispatch:function(t,e){u.dispatch(t,e)},mixin:o}},function(t,e,n){var r=n(11),i=n(12),s=n(16),o=n(6).constants.get();t.exports=function(t,e){if(!i(t))throw new Error("Constants expects first parameter to be an array of strings");if(e=e||"",!s(e))throw new Error("Constants expects second parameter string");e.length>0&&(e+=o.separator);var n={};return r(t,function(t){if(!s(t))throw new Error("Constants expects first parameter to be an array of strings");n[t]=e+t,n[t+"_"+o.successSuffix]=e+t+o.separator+o.successSuffix,n[t+"_"+o.failSuffix]=e+t+o.separator+o.failSuffix,n[t+"_"+o.afterSuffix]=e+t+o.separator+o.afterSuffix}),n}},function(t,e,n){var r=n(13),i=n(11),s=n(12),o=n(14),a=n(7).Promise,f=n(6).constants.get(),u=function(t,e){this._dispatcher=t,this._registerActions(e)};u.prototype=r(u.prototype,{_registerActions:function(t){i(t,function(t,e){if(!s(t))throw new Error("ReactFlux.Actions: Action must be an array {login: [CONSTANT, callback]}");var n=t[0],r=t[1];if("undefined"==typeof r)r=function(){};else if(!o(r))throw new Error("ReactFlux.Actions: you did not provide a valid callback for action: "+e);this[e]=this._createAction(e,n,r)}.bind(this))},_createAction:function(t,e,n){return function(){this._dispatch(e,null,arguments);try{var t=n.apply(this,arguments);if(t&&"object"==typeof t&&"[object Error]"==Object.prototype.toString.call(t))throw t}catch(r){t=new a(function(t,e){e(r)})}a.resolve(t).then(function(t){this._dispatch(e,"successSuffix",t),this._dispatch(e,"afterSuffix",t)}.bind(this),function(t){this._dispatch(e,"failSuffix",t),this._dispatch(e,"afterSuffix",t)}.bind(this))}.bind(this)},_dispatch:function(t,e,n){e&&(t+=f.separator+f[e]),this._dispatcher.dispatch(t,n)}}),t.exports=u},function(t,e,n){var r=n(8),i=n(15),s=n(13),o=n(11),a=n(14),f=n(10).EventEmitter,u=n(4),c="change",h=n(9),p=function(t,e,n){this.state=r.Map({_action_states:{}}),this._actionHandlers={},this._handlers={},this._dispatcherIndexes={},this._dispatcher=t,this._mixin(e),this._setInitialState(),this.setHandlers(n),!!this.storeDidMount&&this.storeDidMount()};p.prototype=i(f.prototype,{setState:function(t){this.state=this.state.merge(t),this.emit(c)},setActionState:function(t,e){var n=this.state.get("_action_states");n[t]=s(n[t]||{},e),this.setState({_action_states:n})},resetActionState:function(t){if("undefined"==typeof this._actionHandlers[t])throw new Error("Store.resetActionState constant handler for ["+t+"] is not defined");this.setActionState(t,this._actionHandlers[t].getInitialState())},getActionState:function(t,e){if("undefined"==typeof this._actionHandlers[t])throw new Error("Store.getActionState constant handler for ["+t+"] is not defined");var n=this.state.get("_action_states");return"undefined"==typeof n[t]?void 0:"undefined"==typeof e?n[t]:n[t][e]},get:function(t){return this.state.get(t)},replaceState:function(t){this.state=r.Map(t)},toJS:function(){return this.state.toJS()},toObject:function(){return this.state.toObject()},toJSON:function(){return this.state.toJSON()},isStore:function(){return!0},onChange:function(t){this.on(c,t)},offChange:function(t){this.removeListener(c,t)},_mixin:function(t){o(t,function(t,e){a(t)&&(t=t.bind(this)),this[e]=t}.bind(this))},addHandler:function(t,e){return this._actionHandlers[t]=new h(this,t,e),this},setHandlers:function(t){o(t,function(t){var e,n,r;e=t[0],2==t.length?(r=null,n=t[1]):(r=t[1],n=t[2]);var i=null;r&&(i=r.map(function(t){return t.getHandlerIndex(e)})),this._handlers[e]=n.bind(this);var s=this._dispatcher.register(e,this._handlers[e],i);this._dispatcherIndexes[e]=s}.bind(this))},getHandlerIndex:function(t){if("undefined"==typeof this._dispatcherIndexes[t])throw new Error("Can not get store handler for constant: "+t);return this._dispatcherIndexes[t]},_setInitialState:function(){!!this.getInitialState&&this.setState(this.getInitialState())},mixin:function(){return u(this)}}),t.exports=p},function(t,e,n){var r=n(14),i=n(11);t.exports=function(){var t=Array.prototype.slice.call(arguments);if(!t.length)throw new Error("Flux.mixin expects a store or a list of stores");return i(t,function(t){if("undefined"==typeof t||!r(t.onChange)||!r(t.offChange))throw new Error("Flux.mixin expects a store or an array of stores")}),{componentWillMount:function(){"undefined"==typeof this._react_flux_onChange&&(this._react_flux_onChange=function(){this.isMounted()&&this.setState(this.getStateFromStores())}.bind(this)),this.setState(this.getStateFromStores())},componentDidMount:function(){for(var e=0;e<t.length;e++){if(!r(t[e].onChange))throw new Error("Mixin expects stores");t[e].onChange(this._react_flux_onChange)}},componentWillUnmount:function(){for(var e=0;e<t.length;e++)t[e].offChange(this._react_flux_onChange)}}}},function(t,e,n){function r(){this._registry={}}var i=n(7).Promise,s=n(13),o=n(14),a=n(12),f=n(16),u=n(11);r.prototype=s(r.prototype,{register:function(t,e,n){if(!f(t)||0==t.length)throw new Error("Dispatcher.register: constant must be a string");if(n=n||null,!o(e))throw new Error("Dispatcher.register expects second parameter to be a callback");if(null!==n&&!a(n))throw new Error("Dispatcher.register expects third parameter to be null or an array");var r=this._getRegistry(t);return r.callbacks.push(e),r.waitFor.push(n),r.callbacks.length-1},dispatch:function(t,e){var n=this._getRegistry(t);n.dispatchQueue.push({constant:t,payload:e}),this._dispatch(n)},_dispatch:function(t){if(!t.isDispatching&&0!=t.dispatchQueue.length){t.isDispatching=!0;var e=t.dispatchQueue.shift();this._createDispatchPromises(t),u(t.callbacks,function(n,r){var s=function(t,e,n){return function(){i.resolve(t.callbacks[e](n)).then(function(){t.resolves[e](n)},function(){t.rejects[e](new Error("Dispatch callback error"))})}}(t,r,e.payload),o=t.waitFor[r];if(o){var a=this._getPromisesByIndexes(t,o);i.all(a).then(s,s)}else s()}.bind(this)),i.all(t.promises).then(function(){this._onDispatchEnd(t)}.bind(this),function(){this._onDispatchEnd(t)})}},_getRegistry:function(t){return"undefined"==typeof this._registry[t]&&(this._registry[t]={callbacks:[],waitFor:[],promises:[],resolves:[],rejects:[],dispatchQueue:[],isDispatching:!1}),this._registry[t]},_getPromisesByIndexes:function(t,e){return e.map(function(e){return t.promises[e]})},_createDispatchPromises:function(t){t.promises=[],t.resolves=[],t.rejects=[],u(t.callbacks,function(e,n){t.promises[n]=new i(function(e,r){t.resolves[n]=e,t.rejects[n]=r})})},_onDispatchEnd:function(t){t.promises=[],t.resolves=[],t.rejects=[],t.isDispatching=!1,this._dispatch(t)}}),t.exports=r},function(t,e,n){var r=n(16),i="_",s="SUCCESS",o="FAIL",a="AFTER",f={constants:{separator:i,successSuffix:s,failSuffix:o,afterSuffix:a}};t.exports={constants:{setSeparator:function(t){if(!r(t)||!t.length)throw new Error("Constants.separator must be a non empty string");f.constants.separator=t},setSuccessSuffix:function(t){if(!r(t)||!t.length)throw new Error("Constants.successSuffix must be a non empty string");f.constants.successSuffix=t},setFailSuffix:function(t){if(!r(t)||!t.length)throw new Error("Constants.failSuffix must be a non empty string");f.constants.failSuffix=t},setAfterSuffix:function(t){if(!r(t)||!t.length)throw new Error("Constants.afterSuffix must be a non empty string");f.constants.afterSuffix=t},resetToDefaults:function(){f.constants.separator=i,f.constants.successSuffix=s,f.constants.failSuffix=o,f.constants.afterSuffix=a},get:function(){return f.constants}}}},function(e){e.exports=t},function(t){t.exports=e},function(t,e,n){function r(t,e,n){if(!t.isStore())throw new Error("StoreActionHandler expects first parameter to be a store");if(!i(e))throw new Error("StoreActionHandler expects second parameter to be a constant(string)");if("undefined"==typeof n.getInitialState&&(n.getInitialState=function(){return{}}),!s(n.getInitialState))throw new Error("StoreActionHandler expects getInitialState to be a function");n=n||{},this.parent=t,this.constant=e,this.getInitialState=n.getInitialState,this.before=n.before||null,this.after=n.after||null,this.success=n.success||null,this.fail=n.fail||null,this.parent.setActionState(this.constant,this.getInitialState());for(var r=[],f=a.length,u=0;f>u;u++){var c=a[u];if(null!=this[c]){if(!s(this[c]))throw new Error('StoreActionHandler expects "'+c+'" to be a function');var e=this.constant;"before"!=c&&(e+=o.separator+o[c+"Suffix"]),r.push([e,this[c].bind(this)])}}t.setHandlers(r)}var i=n(16),s=n(14),o=n(6).constants.get(),a=["before","after","success","fail"];r.prototype={setState:function(t){this.parent.setActionState(this.constant,t)},getState:function(){return this.parent.getActionState(this.constant)}},t.exports=r},function(t){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var e,r,o,a,f,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,a=new Array(o-1),f=1;o>f;f++)a[f-1]=arguments[f];r.apply(this,a)}else if(i(r)){for(o=arguments.length,a=new Array(o-1),f=1;o>f;f++)a[f-1]=arguments[f];for(u=r.slice(),o=u.length,f=0;o>f;f++)u[f].apply(this,a)}return!0},e.prototype.addListener=function(t,r){var o;if(!n(r))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(r.listener)?r.listener:r),this._events[t]?i(this._events[t])?this._events[t].push(r):this._events[t]=[this._events[t],r]:this._events[t]=r,i(this._events[t])&&!this._events[t].warned){var o;o=s(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},e.prototype.removeListener=function(t,e){var r,s,o,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,s=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(a=o;a-->0;)if(r[a]===e||r[a].listener&&r[a].listener===e){s=a;break}if(0>s)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},e.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.listenerCount=function(t,e){var r;return r=t._events&&t._events[e]?n(t._events[e])?1:t._events[e].length:0}},function(t,e,n){function r(t,e,n){var r=-1,o=t?t.length:0;if(e=e&&"undefined"==typeof n?e:i(e,n,3),"number"==typeof o)for(;++r<o&&e(t[r],r,t)!==!1;);else s(t,e);return t}var i=n(24),s=n(17);t.exports=r},function(t,e,n){var r=n(26),i="[object Array]",s=Object.prototype,o=s.toString,a=r(a=Array.isArray)&&a,f=a||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&o.call(t)==i||!1};t.exports=f},function(t,e,n){function r(t){var e=arguments,n=2;if(!a(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var r=i(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(r=e[--n]);for(var c=u(arguments,1,n),h=-1,p=o(),l=o();++h<n;)s(t,c[h],r,p,l);return f(p),f(l),t}var i=n(24),s=n(20),o=n(21),a=n(19),f=n(22),u=n(23);t.exports=r},function(t){function e(t){return"function"==typeof t}t.exports=e},function(t,e,n){var r=n(24),i=n(18),s=n(25),o=function(t,e,n){var o,a=t,f=a;if(!a)return f;var u=arguments,c=0,h="number"==typeof n?2:u.length;if(h>3&&"function"==typeof u[h-2])var p=r(u[--h-1],u[h--],2);else h>2&&"function"==typeof u[h-1]&&(p=u[--h]);for(;++c<h;)if(a=u[c],a&&s[typeof a])for(var l=-1,v=s[typeof a]&&i(a),d=v?v.length:0;++l<d;)o=v[l],f[o]=p?p(f[o],a[o]):a[o];return f};t.exports=o},function(t){function e(t){return"string"==typeof t||t&&"object"==typeof t&&i.call(t)==n||!1}var n="[object String]",r=Object.prototype,i=r.toString;t.exports=e},function(t,e,n){var r=n(24),i=n(18),s=n(25),o=function(t,e,n){var o,a=t,f=a;if(!a)return f;if(!s[typeof a])return f;e=e&&"undefined"==typeof n?e:r(e,n,3);for(var u=-1,c=s[typeof a]&&i(a),h=c?c.length:0;++u<h;)if(o=c[u],e(a[o],o,t)===!1)return f;return f};t.exports=o},function(t,e,n){var r=n(26),i=n(19),s=n(27),o=r(o=Object.keys)&&o,a=o?function(t){return i(t)?o(t):[]}:s;t.exports=a},function(t,e,n){function r(t){return!(!t||!i[typeof t])}var i=n(25);t.exports=r},function(t,e,n){function r(t,e,n,f,u){(o(e)?i:s)(e,function(e,i){var s,c,h=e,p=t[i];if(e&&((c=o(e))||a(e))){for(var l=f.length;l--;)if(s=f[l]==e){p=u[l];break}if(!s){var v;n&&(h=n(p,e),(v="undefined"!=typeof h)&&(p=h)),v||(p=c?o(p)?p:[]:a(p)?p:{}),f.push(e),u.push(p),v||r(p,e,n,f,u)}}else n&&(h=n(p,e),"undefined"==typeof h&&(h=e)),"undefined"!=typeof h&&(p=h);t[i]=p})}var i=n(11),s=n(17),o=n(12),a=n(28);t.exports=r},function(t,e,n){function r(){return i.pop()||[]}var i=n(29);t.exports=r},function(t,e,n){function r(t){t.length=0,i.length<s&&i.push(t)}var i=n(29),s=n(30);t.exports=r},function(t){function e(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,s=Array(0>i?0:i);++r<i;)s[r]=t[e+r];return s}t.exports=e},function(t,e,n){function r(t,e,n){if("function"!=typeof t)return s;if("undefined"==typeof e||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(a.funcNames&&(r=!t.name),r=r||!a.funcDecomp,!r)){var h=c.call(t);a.funcNames||(r=!f.test(h)),r||(r=u.test(h),o(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,s){return t.call(e,n,r,i,s)}}return i(t,e)}var i=n(33),s=n(34),o=n(31),a=n(32),f=/^\s*function[ \n\r\t]+\w/,u=/\bthis\b/,c=Function.prototype.toString;t.exports=r},function(t){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};t.exports=e},function(t){function e(t){return"function"==typeof t&&i.test(t)}var n=Object.prototype,r=n.toString,i=RegExp("^"+String(r).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");t.exports=e},function(t,e,n){var r=n(25),i=Object.prototype,s=i.hasOwnProperty,o=function(t){var e,n=t,i=[];if(!n)return i;if(!r[typeof t])return i;for(e in n)s.call(n,e)&&i.push(e);return i};t.exports=o},function(t,e,n){var r=n(26),i=n(35),s="[object Object]",o=Object.prototype,a=o.toString,f=r(f=Object.getPrototypeOf)&&f,u=f?function(t){if(!t||a.call(t)!=s)return!1;var e=t.valueOf,n=r(e)&&(n=f(e))&&f(n);return n?t==n||f(t)==n:i(t)}:i;t.exports=u},function(t){var e=[];t.exports=e},function(t){var e=40;t.exports=e},function(t,e,n){var r=n(26),i=n(36),s={configurable:!1,enumerable:!1,value:null,writable:!1},o=function(){try{var t={},e=r(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(i){}return n}(),a=o?function(t,e){s.value=e,o(t,"__bindData__",s)}:i;t.exports=a},function(t,e,n){(function(e){var r=n(26),i=/\bthis\b/,s={};s.funcDecomp=!r(e.WinRTError)&&i.test(function(){return this}),s.funcNames="string"==typeof Function.name,t.exports=s}).call(e,function(){return this}())},function(t,e,n){function r(t,e){return arguments.length>2?i(t,17,s(arguments,2),null,e):i(t,1,null,null,e)}var i=n(37),s=n(23);t.exports=r},function(t){function e(t){return t}t.exports=e},function(t,e,n){function r(t){var e,n;return t&&f.call(t)==o&&(e=t.constructor,!s(e)||e instanceof e)?(i(t,function(t,e){n=e}),"undefined"==typeof n||u.call(t,n)):!1}var i=n(38),s=n(14),o="[object Object]",a=Object.prototype,f=a.toString,u=a.hasOwnProperty;t.exports=r},function(t){function e(){}t.exports=e},function(t,e,n){function r(t,e,n,f,h,p){var l=1&e,v=2&e,d=4&e,g=16&e,y=32&e;if(!v&&!o(t))throw new TypeError;g&&!n.length&&(e&=-17,g=n=!1),y&&!f.length&&(e&=-33,y=f=!1);var m=t&&t.__bindData__;if(m&&m!==!0)return m=a(m),m[2]&&(m[2]=a(m[2])),m[3]&&(m[3]=a(m[3])),!l||1&m[1]||(m[4]=h),!l&&1&m[1]&&(e|=8),!d||4&m[1]||(m[5]=p),g&&u.apply(m[2]||(m[2]=[]),n),y&&c.apply(m[3]||(m[3]=[]),f),m[1]|=e,r.apply(null,m);var _=1==e||17===e?i:s;return _([t,e,n,f,h,p])}var i=n(39),s=n(40),o=n(14),a=n(23),f=[],u=f.push,c=f.unshift;t.exports=r},function(t,e,n){var r=n(24),i=n(25),s=function(t,e,n){var s,o=t,a=o;if(!o)return a;if(!i[typeof o])return a;e=e&&"undefined"==typeof n?e:r(e,n,3);for(s in o)if(e(o[s],s,t)===!1)return a;return a};t.exports=s},function(t,e,n){function r(t){function e(){if(r){var t=a(r);u.apply(t,arguments)}if(this instanceof e){var o=i(n.prototype),c=n.apply(o,t||arguments);return s(c)?c:o}return n.apply(f,t||arguments)}var n=t[0],r=t[2],f=t[4];return o(e,t),e}var i=n(41),s=n(19),o=n(31),a=n(23),f=[],u=f.push;t.exports=r},function(t,e,n){function r(t){function e(){var t=v?p:this;if(c){var o=a(c);u.apply(o,arguments)}if((h||g)&&(o||(o=a(arguments)),h&&u.apply(o,h),g&&o.length<l))return f|=16,r([n,y?f:-4&f,o,null,p,l]);if(o||(o=arguments),d&&(n=t[m]),this instanceof e){t=i(n.prototype);var _=n.apply(t,o);return s(_)?_:t}return n.apply(t,o)}var n=t[0],f=t[1],c=t[2],h=t[3],p=t[4],l=t[5],v=1&f,d=2&f,g=4&f,y=8&f,m=n;return o(e,t),e}var i=n(41),s=n(19),o=n(31),a=n(23),f=[],u=f.push;t.exports=r},function(t,e,n){(function(e){function r(t){return s(t)?o(t):{}}var i=n(26),s=n(19),o=(n(36),i(o=Object.create)&&o);o||(r=function(){function t(){}return function(n){if(s(n)){t.prototype=n;var r=new t;t.prototype=null}return r||e.Object()}}()),t.exports=r}).call(e,function(){return this}())}])});