!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("es6-promise"),require("immutable")):"function"==typeof define&&define.amd?define(["es6-promise","immutable"],e):"object"==typeof exports?exports.ReactFlux=e(require("es6-promise"),require("immutable")):t.ReactFlux=e(t["es6-promise"],t.immutable)}(this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var r=n(1),i=n(2),s=n(3),o=n(4),u=n(5),a=new u;t.exports={createActions:function(t){return new i(a,t)},createStore:function(t,e){return new s(a,t,e)},createConstants:function(t,e){return new r(t,e)},dispatch:function(t,e){a.dispatch(t,e)},mixin:o}},function(t,e,n){var r=n(9),i=n(10),s=n(11);t.exports=function(t,e){if(!i(t))throw new Error("Constants expects first parameter to be an array of strings");if(e=e||"",!s(e))throw new Error("Constants expects second parameter string");e.length>0&&(e+="_");var n={};return r(t,function(t){if(!s(t))throw new Error("Constants expects first parameter to be an array of strings");n[t]=e+t,n[t+"_SUCCESS"]=e+t+"_SUCCESS",n[t+"_FAIL"]=e+t+"_FAIL"}),n}},function(t,e,n){var r=n(12),i=n(9),s=n(10),o=n(13),u=n(6).Promise,a=function(t,e){this._dispatcher=t,this._registerActions(e)};a.prototype=r(a.prototype,{_registerActions:function(t){i(t,function(t,e){if(!s(t))throw new Error("ReactFlux.Actions: Action must be an array {login: [CONSTANT, callback]}");var n=t[0],r=t[1];if("undefined"==typeof r)r=function(){};else if(!o(r))throw new Error("ReactFlux.Actions: you did not provide a valid callback for action: "+e);this[e]=this._createAction(e,n,r)}.bind(this))},_createAction:function(t,e,n){return function(){this._dispatcher.dispatch(e,arguments);try{var t=n.apply(this,arguments);if(t&&"object"==typeof t&&"[object Error]"==Object.prototype.toString.call(t))throw t}catch(r){t=new u(function(t,e){e(r)})}u.resolve(t).then(function(t){this._dispatcher.dispatch(e+"_SUCCESS",t)}.bind(this),function(t){this._dispatcher.dispatch(e+"_FAIL",t)}.bind(this))}.bind(this)}}),t.exports=a},function(t,e,n){var r=n(7),i=n(14),s=n(9),o=n(13),u=n(8).EventEmitter,a=n(4),c="change",f=function(t,e,n){this.state=r.Map({}),this._handlers={},this._dispatcherIndexes={},this._dispatcher=t,this._mixin(e),this._setInitialState(),this._setHandlers(n),!!this.storeDidMount&&this.storeDidMount()};f.prototype=i(u.prototype,{setState:function(t){this.state=this.state.merge(t),this.emit(c)},replaceState:function(t){this.state=r.Map(t)},toJS:function(){return this.state.toJS()},toObject:function(){return this.state.toObject()},toJSON:function(){return this.state.toJSON()},isStore:function(){return!0},onChange:function(t){this.on(c,t)},offChange:function(t){this.removeListener(c,t)},_mixin:function(t){s(t,function(t,e){o(t)&&(t=t.bind(this)),this[e]=t}.bind(this))},_setHandlers:function(t){this._dispatcherIndexes={},s(t,function(t){var e,n,r;e=t[0],2==t.length?(r=null,n=t[1]):(r=t[1],n=t[2]);var i=null;r&&(i=r.map(function(t){return t.getHandlerIndex(e)})),this._handlers[e]=n.bind(this);var s=this._dispatcher.register(e,this._handlers[e],i);this._dispatcherIndexes[e]=s}.bind(this))},getHandlerIndex:function(t){if("undefined"==typeof this._dispatcherIndexes[t])throw new Error("Can not get store handler for constant: "+t);return this._dispatcherIndexes[t]},_setInitialState:function(){!!this.getInitialState&&this.setState(this.getInitialState())},mixin:function(){return a(this)}}),t.exports=f},function(t,e,n){var r=n(13),i=n(9);t.exports=function(){var t=Array.prototype.slice.call(arguments);if(!t.length)throw new Error("Flux.mixin expects a store or a list of stores");return i(t,function(t){if("undefined"==typeof t||!r(t.onChange)||!r(t.offChange))throw new Error("Flux.mixin expects a store or an array of stores")}),{componentWillMount:function(){this.setState(this.getStateFromStores())},componentDidMount:function(){for(var e=0;e<t.length;e++){if(!r(t[e].onChange))throw new Error("Mixin expects stores");t[e].onChange(this._reactFluxOnChange)}},componentWillUnount:function(){for(var e=0;e<t.length;e++)t[e].offChange(this._reactFluxOnChange)},_reactFluxOnChange:function(){this.setState(this.getStateFromStores())}}}},function(t,e,n){function r(){this._registry={}}var i=n(6).Promise,s=n(12),o=n(13),u=n(10),a=n(11),c=n(9);r.prototype=s(r.prototype,{register:function(t,e,n){if(!a(t)||0==t.length)throw new Error("Dispatcher.register: constant must be a string");if(n=n||null,!o(e))throw new Error("Dispatcher.register expects second parameter to be a callback");if(null!==n&&!u(n))throw new Error("Dispatcher.register expects third parameter to be null or an array");var r=this._getRegistry(t);return r.callbacks.push(e),r.waitFor.push(n),r.callbacks.length-1},dispatch:function(t,e){var n=this._getRegistry(t);n.dispatchQueue.push({constant:t,payload:e}),this._dispatch(n)},_dispatch:function(t){if(!t.isDispatching&&0!=t.dispatchQueue.length){t.isDispatching=!0;var e=t.dispatchQueue.shift();this._createDispatchPromises(t),c(t.callbacks,function(n,r){var s=function(t,e,n){return function(){i.resolve(t.callbacks[e](n)).then(function(){t.resolves[e](n)},function(){t.rejects[e](new Error("Dispatch callback error"))})}}(t,r,e.payload),o=t.waitFor[r];if(o){var u=this._getPromisesByIndexes(t,o);i.all(u).then(s,s)}else s()}.bind(this)),i.all(t.promises).then(function(){this._onDispatchEnd(t)}.bind(this),function(){this._onDispatchEnd(t)})}},_getRegistry:function(t){return"undefined"==typeof this._registry[t]&&(this._registry[t]={callbacks:[],waitFor:[],promises:[],resolves:[],rejects:[],dispatchQueue:[],isDispatching:!1}),this._registry[t]},_getPromisesByIndexes:function(t,e){return e.map(function(e){return t.promises[e]})},_createDispatchPromises:function(t){t.promises=[],t.resolves=[],t.rejects=[],c(t.callbacks,function(e,n){t.promises[n]=new i(function(e,r){t.resolves[n]=e,t.rejects[n]=r})})},_onDispatchEnd:function(t){t.promises=[],t.resolves=[],t.rejects=[],t.isDispatching=!1,this._dispatch(t)}}),t.exports=r},function(e){e.exports=t},function(t){t.exports=e},function(t){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var e,r,o,u,a,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length))throw e=arguments[1],e instanceof Error?e:TypeError('Uncaught, unspecified "error" event.');if(r=this._events[t],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,u=new Array(o-1),a=1;o>a;a++)u[a-1]=arguments[a];r.apply(this,u)}else if(i(r)){for(o=arguments.length,u=new Array(o-1),a=1;o>a;a++)u[a-1]=arguments[a];for(c=r.slice(),o=c.length,a=0;o>a;a++)c[a].apply(this,u)}return!0},e.prototype.addListener=function(t,r){var o;if(!n(r))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(r.listener)?r.listener:r),this._events[t]?i(this._events[t])?this._events[t].push(r):this._events[t]=[this._events[t],r]:this._events[t]=r,i(this._events[t])&&!this._events[t].warned){var o;o=s(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},e.prototype.removeListener=function(t,e){var r,s,o,u;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,s=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(u=o;u-->0;)if(r[u]===e||r[u].listener&&r[u].listener===e){s=u;break}if(0>s)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},e.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.listenerCount=function(t,e){var r;return r=t._events&&t._events[e]?n(t._events[e])?1:t._events[e].length:0}},function(t,e,n){function r(t,e,n){var r=-1,o=t?t.length:0;if(e=e&&"undefined"==typeof n?e:i(e,n,3),"number"==typeof o)for(;++r<o&&e(t[r],r,t)!==!1;);else s(t,e);return t}var i=n(19),s=n(15);t.exports=r},function(t,e,n){var r=n(18),i="[object Array]",s=Object.prototype,o=s.toString,u=r(u=Array.isArray)&&u,a=u||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&o.call(t)==i||!1};t.exports=a},function(t){function e(t){return"string"==typeof t||t&&"object"==typeof t&&i.call(t)==n||!1}var n="[object String]",r=Object.prototype,i=r.toString;t.exports=e},function(t,e,n){function r(t){var e=arguments,n=2;if(!u(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var r=i(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(r=e[--n]);for(var f=c(arguments,1,n),p=-1,h=o(),l=o();++p<n;)s(t,f[p],r,h,l);return a(h),a(l),t}var i=n(19),s=n(20),o=n(21),u=n(16),a=n(22),c=n(23);t.exports=r},function(t){function e(t){return"function"==typeof t}t.exports=e},function(t,e,n){var r=n(19),i=n(17),s=n(24),o=function(t,e,n){var o,u=t,a=u;if(!u)return a;var c=arguments,f=0,p="number"==typeof n?2:c.length;if(p>3&&"function"==typeof c[p-2])var h=r(c[--p-1],c[p--],2);else p>2&&"function"==typeof c[p-1]&&(h=c[--p]);for(;++f<p;)if(u=c[f],u&&s[typeof u])for(var l=-1,v=s[typeof u]&&i(u),d=v?v.length:0;++l<d;)o=v[l],a[o]=h?h(a[o],u[o]):u[o];return a};t.exports=o},function(t,e,n){var r=n(19),i=n(17),s=n(24),o=function(t,e,n){var o,u=t,a=u;if(!u)return a;if(!s[typeof u])return a;e=e&&"undefined"==typeof n?e:r(e,n,3);for(var c=-1,f=s[typeof u]&&i(u),p=f?f.length:0;++c<p;)if(o=f[c],e(u[o],o,t)===!1)return a;return a};t.exports=o},function(t,e,n){function r(t){return!(!t||!i[typeof t])}var i=n(24);t.exports=r},function(t,e,n){var r=n(18),i=n(16),s=n(25),o=r(o=Object.keys)&&o,u=o?function(t){return i(t)?o(t):[]}:s;t.exports=u},function(t){function e(t){return"function"==typeof t&&i.test(t)}var n=Object.prototype,r=n.toString,i=RegExp("^"+String(r).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");t.exports=e},function(t,e,n){function r(t,e,n){if("function"!=typeof t)return s;if("undefined"==typeof e||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(u.funcNames&&(r=!t.name),r=r||!u.funcDecomp,!r)){var p=f.call(t);u.funcNames||(r=!a.test(p)),r||(r=c.test(p),o(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,s){return t.call(e,n,r,i,s)}}return i(t,e)}var i=n(31),s=n(32),o=n(26),u=n(27),a=/^\s*function[ \n\r\t]+\w/,c=/\bthis\b/,f=Function.prototype.toString;t.exports=r},function(t,e,n){function r(t,e,n,a,c){(o(e)?i:s)(e,function(e,i){var s,f,p=e,h=t[i];if(e&&((f=o(e))||u(e))){for(var l=a.length;l--;)if(s=a[l]==e){h=c[l];break}if(!s){var v;n&&(p=n(h,e),(v="undefined"!=typeof p)&&(h=p)),v||(h=f?o(h)?h:[]:u(h)?h:{}),a.push(e),c.push(h),v||r(h,e,n,a,c)}}else n&&(p=n(h,e),"undefined"==typeof p&&(p=e)),"undefined"!=typeof p&&(h=p);t[i]=h})}var i=n(9),s=n(15),o=n(10),u=n(28);t.exports=r},function(t,e,n){function r(){return i.pop()||[]}var i=n(29);t.exports=r},function(t,e,n){function r(t){t.length=0,i.length<s&&i.push(t)}var i=n(29),s=n(30);t.exports=r},function(t){function e(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,s=Array(0>i?0:i);++r<i;)s[r]=t[e+r];return s}t.exports=e},function(t){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};t.exports=e},function(t,e,n){var r=n(24),i=Object.prototype,s=i.hasOwnProperty,o=function(t){var e,n=t,i=[];if(!n)return i;if(!r[typeof t])return i;for(e in n)s.call(n,e)&&i.push(e);return i};t.exports=o},function(t,e,n){var r=n(18),i=n(33),s={configurable:!1,enumerable:!1,value:null,writable:!1},o=function(){try{var t={},e=r(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(i){}return n}(),u=o?function(t,e){s.value=e,o(t,"__bindData__",s)}:i;t.exports=u},function(t,e,n){(function(e){var r=n(18),i=/\bthis\b/,s={};s.funcDecomp=!r(e.WinRTError)&&i.test(function(){return this}),s.funcNames="string"==typeof Function.name,t.exports=s}).call(e,function(){return this}())},function(t,e,n){var r=n(18),i=n(34),s="[object Object]",o=Object.prototype,u=o.toString,a=r(a=Object.getPrototypeOf)&&a,c=a?function(t){if(!t||u.call(t)!=s)return!1;var e=t.valueOf,n=r(e)&&(n=a(e))&&a(n);return n?t==n||a(t)==n:i(t)}:i;t.exports=c},function(t){var e=[];t.exports=e},function(t){var e=40;t.exports=e},function(t,e,n){function r(t,e){return arguments.length>2?i(t,17,s(arguments,2),null,e):i(t,1,null,null,e)}var i=n(35),s=n(23);t.exports=r},function(t){function e(t){return t}t.exports=e},function(t){function e(){}t.exports=e},function(t,e,n){function r(t){var e,n;return t&&a.call(t)==o&&(e=t.constructor,!s(e)||e instanceof e)?(i(t,function(t,e){n=e}),"undefined"==typeof n||c.call(t,n)):!1}var i=n(36),s=n(13),o="[object Object]",u=Object.prototype,a=u.toString,c=u.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e,n,a,p,h){var l=1&e,v=2&e,d=4&e,g=16&e,y=32&e;if(!v&&!o(t))throw new TypeError;g&&!n.length&&(e&=-17,g=n=!1),y&&!a.length&&(e&=-33,y=a=!1);var m=t&&t.__bindData__;if(m&&m!==!0)return m=u(m),m[2]&&(m[2]=u(m[2])),m[3]&&(m[3]=u(m[3])),!l||1&m[1]||(m[4]=p),!l&&1&m[1]&&(e|=8),!d||4&m[1]||(m[5]=h),g&&c.apply(m[2]||(m[2]=[]),n),y&&f.apply(m[3]||(m[3]=[]),a),m[1]|=e,r.apply(null,m);var _=1==e||17===e?i:s;return _([t,e,n,a,p,h])}var i=n(37),s=n(38),o=n(13),u=n(23),a=[],c=a.push,f=a.unshift;t.exports=r},function(t,e,n){var r=n(19),i=n(24),s=function(t,e,n){var s,o=t,u=o;if(!o)return u;if(!i[typeof o])return u;e=e&&"undefined"==typeof n?e:r(e,n,3);for(s in o)if(e(o[s],s,t)===!1)return u;return u};t.exports=s},function(t,e,n){function r(t){function e(){if(r){var t=u(r);c.apply(t,arguments)}if(this instanceof e){var o=i(n.prototype),f=n.apply(o,t||arguments);return s(f)?f:o}return n.apply(a,t||arguments)}var n=t[0],r=t[2],a=t[4];return o(e,t),e}var i=n(39),s=n(16),o=n(26),u=n(23),a=[],c=a.push;t.exports=r},function(t,e,n){function r(t){function e(){var t=v?h:this;if(f){var o=u(f);c.apply(o,arguments)}if((p||g)&&(o||(o=u(arguments)),p&&c.apply(o,p),g&&o.length<l))return a|=16,r([n,y?a:-4&a,o,null,h,l]);if(o||(o=arguments),d&&(n=t[m]),this instanceof e){t=i(n.prototype);var _=n.apply(t,o);return s(_)?_:t}return n.apply(t,o)}var n=t[0],a=t[1],f=t[2],p=t[3],h=t[4],l=t[5],v=1&a,d=2&a,g=4&a,y=8&a,m=n;return o(e,t),e}var i=n(39),s=n(16),o=n(26),u=n(23),a=[],c=a.push;t.exports=r},function(t,e,n){(function(e){function r(t){return s(t)?o(t):{}}var i=n(18),s=n(16),o=(n(33),i(o=Object.create)&&o);o||(r=function(){function t(){}return function(n){if(s(n)){t.prototype=n;var r=new t;t.prototype=null}return r||e.Object()}}()),t.exports=r}).call(e,function(){return this}())}])});